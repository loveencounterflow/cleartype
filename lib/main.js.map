{
  "version": 3,
  "file": "",
  "sourceRoot": "",
  "sources": [
    "../src/main.coffee"
  ],
  "names": [],
  "mappings": "AACA;EAAA;AAAA,MAAA,SAAA,EAAA,eAAA,EAAA,0BAAA,EAAA,qBAAA,EAAA,EAAA,EAAA,QAAA,EAAA,KAAA,EAAA,oBAAA,EAAA,IAAA,EAAA,IAAA,EAAA,eAAA,EAAA,GAAA,EAAA,GAAA,EAAA;;EAEA,CAAA,CAAE,GAAF,EACE,OADF,EAEE,eAFF,EAGE,QAHF,CAAA,GAG4B,OAAA,CAAQ,YAAR,CAH5B;;EAIA,CAAA,CAAE,IAAF,EACE,oBADF,EAEE,qBAFF,EAGE,KAHF,EAIE,IAJF,EAKE,GALF,CAAA,GAK4B,OAAA,CAAQ,WAAR,CAL5B,EANA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EA4DM,kBAAN,MAAA,gBAAA,QAA8B,MAA9B,CAAA;;EACM,6BAAN,MAAA,2BAAA,QAAyC,gBAAzC,CAAA;;EAIM;;IAAN,MAAA,UAAA,CAAA;;MAGE,WAAa,CAAA,CAAA;QACX,IAAA,CAAK,IAAL,EAAQ,WAAR,EAAwB,KAAH,GAAc,IAAI,OAAJ,CAAA,CAAd,GAAiC,IAAI,GAAI,wDAAR,CAAA,CAAtD;QACA,qBAAA,CAAsB,IAAtB;AACA,eAAO;MAHI,CADf;;;MAOE,QAAU,CAAE,IAAF,CAAA;AACZ,YAAA;QAAI,IAAsC,sCAAtC;AAAA,iBAAO,CAAE,CAAA,GAAI,IAAC,CAAA,SAAS,CAAC,GAAX,CAAe,IAAf,CAAN,EAAP;;QACA,IAAC,CAAA,SAAS,CAAC,GAAX,CAAe,IAAf,EAAqB,CAAA,GAAI,MAAM,CAAC,MAAP,CAAc;UAAE,EAAA,EAAI,IAAN;UAAY,KAAA,EAAO;QAAnB,CAAd,CAAzB;AACA,eAAO;MAHC,CAPZ;;;MAaE,GAAK,CAAE,IAAF,EAAQ,CAAR,CAAA;AACH,eAAO,IAAI,CAAC,IAAI,CAAC,IAAV,CAAiB,IAAC,CAAA,QAAD,CAAU,IAAV,CAAjB,EAAmC,CAAnC;MADJ,CAbP;;;MAiBE,YAAc,CAAE,IAAF,EAAQ,CAAR,CAAA;eAAe,CAAM,SAAN,CAAA,IAAc,CAAE,IAAC,CAAA,GAAD,CAAK,IAAL,EAAW,CAAX,CAAF;MAA7B,CAjBhB;;;MAoBE,QAAU,CAAE,IAAF,EAAQ,CAAR,CAAA;QACR,IAAY,IAAC,CAAA,GAAD,CAAK,IAAL,EAAW,CAAX,CAAZ;AAAA,iBAAO,EAAP;;QACA,MAAM,IAAI,0BAAJ,CAA+B,CAAA,iCAAA,CAAA,CAAoC,GAAA,CAAI,IAAJ,CAApC,CAAA,EAAA,CAAA,CAAiD,GAAA,CAAI,CAAJ,CAAjD,CAAA,CAA/B;MAFE,CApBZ;;;MAyBE,iBAAmB,CAAE,IAAF,EAAQ,CAAR,CAAA;QACjB,IAAY,IAAC,CAAA,YAAD,CAAc,IAAd,EAAoB,CAApB,CAAZ;AAAA,iBAAO,EAAP;;QACA,MAAM,IAAI,0BAAJ,CAA+B,CAAA,iCAAA,CAAA,CAAoC,GAAA,CAAI,IAAJ,CAApC,CAAA,EAAA,CAAA,CAAiD,GAAA,CAAI,CAAJ,CAAjD,CAAA,CAA/B;MAFW,CAzBrB;;;MA8BE,MAAQ,CAAE,IAAF,EAAA,GAAQ,CAAR,CAAA;AACN,eAAO,IAAC,CAAA,QAAD,CAAU,IAAV,EAAgB,IAAI,CAAC,OAAO,CAAC,IAAb,CAAoB,IAAC,CAAA,QAAD,CAAU,IAAV,CAApB,EAAsC,GAAA,CAAtC,CAAhB;MADD;;IAhCV;;;wBAoCE,OAAA,GAAS;;;;gBArGX;;;EAwGA,EAAA,GAAK,IAAI,SAAJ,CAAA;;EAkBF,CAAA,CAAA,CAAA,GAAA,EAAA;;;;;;;;;;;;;;AACH,QAAA;IAAE,EAAA,GAAkB,IAAI,SAAJ,CAAA;WAClB,MAAM,CAAC,OAAP,GAAkB,CAAE,SAAF,EAAa,GAAb,EAAkB,EAAlB,EAAsB,GAAA,CAAE,oBAAA,CAAqB,EAArB,CAAF,CAAtB;EAFjB,CAAA;AA1HH",
  "sourcesContent": [
    "\n'use strict'\n\n{ std\n  type_of\n  primitive_types\n  ct_kinds }              = require './builtins'\n{ hide\n  get_instance_methods\n  bind_instance_methods\n  debug\n  help\n  rpr                   } = require './helpers'\n\n###\n\n# from `ltsort` which uses an outdated version of `intertype`:\n\nget_base_types = ->\n  return base_types if base_types?\n  #.........................................................................................................\n  base_types                = new Cleartype()\n  { declare }               = base_types\n  #.........................................................................................................\n  declare.lt_nodelist 'list.of.nonempty.text'\n  #.........................................................................................................\n  declare.lt_constructor_cfg\n    fields:\n      loners:     'boolean'\n    default:\n      loners:     true\n  #.........................................................................................................\n  declare.lt_add_cfg\n    fields:\n      name:       'nonempty.text'\n      precedes:   'lt_nodelist'\n      needs:      'lt_nodelist'\n    default:\n      name:       null\n      precedes:     null\n      needs:      null\n    create: ( x ) ->\n      R           = x ? {}\n      return R unless @isa.object R\n      R.needs      ?= []\n      R.precedes   ?= []\n      R.needs       = [ R.needs,    ] unless @isa.list R.needs\n      R.precedes    = [ R.precedes, ] unless @isa.list R.precedes\n      return R\n  #.........................................................................................................\n  declare.lt_linearize_cfg\n    fields:\n      groups:     'boolean'\n    default:\n      groups:     false\n  #.........................................................................................................\n  return base_types\n\n###\n\n#===========================================================================================================\nclass Cleartype_error extends Error\nclass Cleartype_validation_error extends Cleartype_error\n\n\n#===========================================================================================================\nclass Cleartype\n\n  #---------------------------------------------------------------------------------------------------------\n  constructor: ->\n    hide @, \"_contexts\", if false then new WeakMap() else new Map ### TAINT this is going to be configurable for testing ###\n    bind_instance_methods @\n    return undefined\n\n  #---------------------------------------------------------------------------------------------------------\n  _get_ctx: ( type ) ->\n    return ( R = @_contexts.get type ) if R?\n    @_contexts.set type, R = Object.freeze { me: type, types: @, }\n    return R\n\n  #---------------------------------------------------------------------------------------------------------\n  isa: ( type, x ) ->\n    return type.$isa.call ( @_get_ctx type ), x\n\n  #---------------------------------------------------------------------------------------------------------\n  isa_optional: ( type, x ) -> ( not x? ) or ( @isa type, x )\n\n  #---------------------------------------------------------------------------------------------------------\n  validate: ( type, x ) ->\n    return x if @isa type, x\n    throw new Cleartype_validation_error \"Ωcleartype___1 validation error\\n#{rpr type}\\n#{rpr x}\"\n\n  #---------------------------------------------------------------------------------------------------------\n  validate_optional: ( type, x ) ->\n    return x if @isa_optional type, x\n    throw new Cleartype_validation_error \"Ωcleartype___2 validation error\\n#{rpr type}\\n#{rpr x}\"\n\n  #---------------------------------------------------------------------------------------------------------\n  create: ( type, P... ) ->\n    return @validate type, type.$create.call ( @_get_ctx type ), P...\n\n  #---------------------------------------------------------------------------------------------------------\n  type_of: type_of\n\n#===========================================================================================================\nct = new Cleartype()\n\n\n# #===========================================================================================================\n# class Type\n\n#   #---------------------------------------------------------------------------------------------------------\n#   constructor: ( declaration ) ->\n#     @$isa     = declaration.$isa\n#     @$create  = declaration.$create\n#     return undefined\n\n#   # #---------------------------------------------------------------------------------------------------------\n#   # $isa: ->\n#   # $create: ->\n\n\n#===========================================================================================================\ndo =>\n  CT              = new Cleartype()\n  module.exports  = { Cleartype, std, CT, ( get_instance_methods CT )..., }\n"
  ]
}